!function(t){var o={};function e(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=o,e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)e.d(r,n,function(o){return t[o]}.bind(null,n));return r},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p="",e(e.s=5)}([function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Coordenada=void 0;var r=e(3),n=function(){function t(t,o){this._x=t,this._y=o}return Object.defineProperty(t.prototype,"X",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){return this._x==t.X&&this._y==t.Y},t.prototype.mover=function(t){t==r.Sentido.ABAJO?this.bajar():this.avanzar()},t.prototype.bajar=function(){this._y++},t.prototype.avanzar=function(){this._x++},t}();o.Coordenada=n},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Estado=void 0,function(t){t[t.TOCADO=0]="TOCADO",t[t.INDEMNE=1]="INDEMNE",t[t.HUNDIDO=2]="HUNDIDO"}(o.Estado||(o.Estado={}))},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Dimensiones=void 0;var r=function(){function t(t,o){this._ancho=t,this._largo=o}return Object.defineProperty(t.prototype,"ancho",{get:function(){return this._ancho},set:function(t){this._ancho=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"largo",{get:function(){return this._largo},set:function(t){this._largo=t},enumerable:!1,configurable:!0}),t}();o.Dimensiones=r},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Sentido=void 0,function(t){t[t.ABAJO=0]="ABAJO",t[t.DERECHA=1]="DERECHA"}(o.Sentido||(o.Sentido={}))},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Flota=void 0;var r=e(8),n=e(1),a=function(){function t(t){this._medidas=t,this._flotaBarcos=[],this._generadorFlota=new r.GeneradorFlota(this._medidas),this.generarFlotas()}return t.prototype.generarFlotas=function(){for(var t=[4,4,3,3,3,2,2,2,2],o=0;o<t.length;o++){var e=this._generadorFlota.crearBarco(t[o]);this._flotaBarcos[o]=e}},t.prototype.comprobarBarcoHundido=function(t){for(var o,e=0;e<this._flotaBarcos.length;e++){o=0;for(var r=0;r<this.getLengthFlotaBarcos(e);r++)this.getPosicionBarco(e,r).status==n.Estado.TOCADO&&o++,o==this.getLengthFlotaBarcos(e)&&(alert("Hundido"),this.hundirBarco(this._flotaBarcos[e]),t++)}return t},t.prototype.getLengthFlotaBarcos=function(t){return this._flotaBarcos[t].posiciones.length},t.prototype.getPosicionBarco=function(t,o){return this._flotaBarcos[t].posiciones[o]},t.prototype.hundirBarco=function(t){for(var o=0;o<this.getCasillas(t).length;o++)this.getCasillas(t)[o].status=n.Estado.HUNDIDO},t.prototype.getCasillas=function(t){return t.posiciones},Object.defineProperty(t.prototype,"flotaBarcos",{get:function(){return this._flotaBarcos},enumerable:!1,configurable:!0}),t}();o.Flota=a},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e(6),n=e(4),a=e(2),i=(new r.Juego,new n.Flota(new a.Dimensiones(8,12)));console.log(i.flotaBarcos)},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Juego=void 0;var r=e(2),n=e(0),a=e(7),i=function(){function t(){this._medidasTablero=new r.Dimensiones(8,12),this._tablero=new a.Tablero(this._medidasTablero)}return t.prototype.play=function(){alert("Vienvenido al  Hundir la FLota el juego se desarrolla\n en un tablero de 8x12 y contamos con \n 2 barcos de 4 casillas 3 barcos de 3 casillas y 4 barcos de 2 casillas\n espero que lo disfrutes");do{alert(this._tablero.mostrarTablero()),this._tablero.tratarCasilla(this.SolicitarCoordenadaActuacion())}while(!this._tablero.hundidaTotaFlota());alert("Enhorabuena has ganado y seguro que habra muerto mucha gente eran cruceros por el mediterraneo")},t.prototype.SolicitarCoordenadaActuacion=function(){return new n.Coordenada(this.solicitarPuntoX(),this.solicitarPuntoY())},t.prototype.solicitarPuntoX=function(){do{var t=prompt("Dame el punto en ele eje X");null==t&&(t=0)}while(!this.comprobarCoordenada(t,this._medidasTablero.ancho));return t-1},t.prototype.solicitarPuntoY=function(){do{var t=prompt("Dame el punto en ele eje Y");null==t&&(t=0)}while(!this.comprobarCoordenada(t,this._medidasTablero.largo));return t-1},t.prototype.comprobarCoordenada=function(t,o){return t<o},t}();o.Juego=i},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Tablero=void 0;var r=e(4),n=e(1),a=function(){function t(t){this._numeroBarcosHundidos=0,this._tablero=new Array,this._medidasTablero=t,this._flota=new r.Flota(this._medidasTablero),this.generarTablero()}return t.prototype.generarTablero=function(){this.crearTablero(),this.ColocarFlota()},t.prototype.crearTablero=function(){for(var t=0;t<this._medidasTablero.ancho;t++)this._tablero[t]=new Array(this._medidasTablero.largo)},t.prototype.ColocarFlota=function(){for(var t=0;t<this.getFlotaCompleta().length;t++)for(var o=0;o<this.getFlotaBarco(t).posiciones.length;o++)this.insertarFlota(this.getFlotaBarco(t).posiciones[o].coordenada,this.getFlotaBarco(t).posiciones[o])},t.prototype.insertarFlota=function(t,o){var e=t.X,r=t.Y;this._tablero[e][r]=o},t.prototype.hundidaTotaFlota=function(){return this.numeroBarcosHundidos==this._flota.flotaBarcos.length},t.prototype.mostrarTablero=function(){var t="";t+="     ";for(var o=0;o<this._medidasTablero.largo;o++)t+=o+1+"  |  ";t+="\n";for(var e=0;e<this._medidasTablero.ancho;e++){t+=e+1+"  |   ";for(o=0;o<this._medidasTablero.largo;o++)null!=this.tablero[e][o]?t+=this.tratarCasillaMarcada(this.tablero[e][o]):t+="X  |  ";t+="\n"}return t},t.prototype.tratarCasillaMarcada=function(t){return"W"==t?"W  |  ":t.status==n.Estado.INDEMNE?"X  |  ":t.status==n.Estado.TOCADO?"T  |  ":"H  |  "},t.prototype.tratarCasilla=function(t){null==this.tablero[t.X][t.Y]?(this.tablero[t.X][t.Y]="W",alert("Agua")):this.tablero[t.X][t.Y].status==n.Estado.INDEMNE&&(this.tablero[t.X][t.Y].status=n.Estado.TOCADO,alert("Tocado"),this.numeroBarcosHundidos=this._flota.comprobarBarcoHundido(this._numeroBarcosHundidos))},Object.defineProperty(t.prototype,"tablero",{get:function(){return this._tablero},enumerable:!1,configurable:!0}),t.prototype.getFlotaCompleta=function(){return this._flota.flotaBarcos},t.prototype.getFlotaBarco=function(t){return this._flota.flotaBarcos[t]},Object.defineProperty(t.prototype,"numeroBarcosHundidos",{get:function(){return this._numeroBarcosHundidos},set:function(t){this._numeroBarcosHundidos=t},enumerable:!1,configurable:!0}),t}();o.Tablero=a},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.GeneradorFlota=void 0;var r=e(9),n=e(3),a=e(0),i=function(){function t(t){this._medida=t}return t.prototype.dameNumeroEntreMaximoMinimo=function(t,o){return Math.floor(Math.random()*(t-o)+o)},t.prototype.dameSentidoAleatorio=function(){return 1==this.dameNumeroEntreMaximoMinimo(-1,2)?n.Sentido.DERECHA:n.Sentido.ABAJO},t.prototype.crearBarco=function(t){do{var o=this.dameSentidoAleatorio(),e=this.coordenadaIncial()}while(this.salidaPorLimites(e,t,o));return new r.Barco(t,e,o)},t.prototype.coordenadaIncial=function(){var t=this.dameNumeroEntreMaximoMinimo(0,this._medida.ancho),o=this.dameNumeroEntreMaximoMinimo(0,this._medida.largo);return new a.Coordenada(t,o)},t.prototype.salidaPorLimites=function(t,o,e){var r=!1;return e==n.Sentido.ABAJO?o+t.Y>this._medida.largo&&(r=!0):o+t.X>this._medida.ancho&&(r=!0),r},t}();o.GeneradorFlota=i},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Barco=void 0;var r=e(10),n=e(0),a=e(1),i=function(){function t(t,o,e){this._size=t,this._posiciones=[],this.crearBarco(o,e)}return t.prototype.crearBarco=function(t,o){for(var e=0;e<this._size;e++)this._posiciones.push(new r.Casilla(a.Estado.INDEMNE,new n.Coordenada(t.X,t.Y))),t.mover(o)},t.prototype.getCoordenadaBarco=function(t){return this.posiciones[t].coordenada},Object.defineProperty(t.prototype,"posiciones",{get:function(){return this._posiciones},enumerable:!1,configurable:!0}),t}();o.Barco=i},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Casilla=void 0;var r=function(){function t(t,o){this._status=t,this._coordenada=o}return Object.defineProperty(t.prototype,"status",{get:function(){return this._status},set:function(t){this._status=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordenada",{get:function(){return this._coordenada},set:function(t){this._coordenada=t},enumerable:!1,configurable:!0}),t}();o.Casilla=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2Nvb3JkZW5hZGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2VzdGFkby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZGltZW5zaW9uZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3NlbnRpZG8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2Zsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sL2p1ZWdvLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sL3RhYmxlcm8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2dlbmVyYWRvckZsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9iYXJjby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQ2FzaWxsYS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl94IiwiX3kiLCJ0aGlzIiwieHYiLCJ5diIsImVxdWFscyIsImNvb3JkZW5hZGEiLCJYIiwiWSIsIm1vdmVyIiwic2VudGlkbyIsIlNlbnRpZG8iLCJBQkFKTyIsImJhamFyIiwiYXZhbnphciIsIkNvb3JkZW5hZGEiLCJFc3RhZG8iLCJfYW5jaG8iLCJfbGFyZ28iLCJEaW1lbnNpb25lcyIsIl9tZWRpZGFzIiwiX2Zsb3RhQmFyY29zIiwiX2dlbmVyYWRvckZsb3RhIiwiR2VuZXJhZG9yRmxvdGEiLCJnZW5lcmFyRmxvdGFzIiwiYmFyY29zIiwibGVuZ3RoIiwiYmFyY28iLCJjcmVhckJhcmNvIiwiY29tcHJvYmFyQmFyY29IdW5kaWRvIiwibnVtZXJvQmFyY29zSHVuZGlkb3MiLCJiYXJjb3NUb2NhZG9zIiwiaiIsImdldExlbmd0aEZsb3RhQmFyY29zIiwiZ2V0UG9zaWNpb25CYXJjbyIsInN0YXR1cyIsIlRPQ0FETyIsImFsZXJ0IiwiaHVuZGlyQmFyY28iLCJwb3NpY2lvbmVzIiwiZ2V0Q2FzaWxsYXMiLCJIVU5ESURPIiwiRmxvdGEiLCJmIiwiSnVlZ28iLCJjb25zb2xlIiwibG9nIiwiZmxvdGFCYXJjb3MiLCJfbWVkaWRhc1RhYmxlcm8iLCJfdGFibGVybyIsIlRhYmxlcm8iLCJwbGF5IiwibW9zdHJhclRhYmxlcm8iLCJ0cmF0YXJDYXNpbGxhIiwiU29saWNpdGFyQ29vcmRlbmFkYUFjdHVhY2lvbiIsImh1bmRpZGFUb3RhRmxvdGEiLCJzb2xpY2l0YXJQdW50b1giLCJzb2xpY2l0YXJQdW50b1kiLCJwcm9tcHQiLCJjb21wcm9iYXJDb29yZGVuYWRhIiwiYW5jaG8iLCJsYXJnbyIsInB1bnRvIiwibWF4aW1vIiwibWVkaWRhc1RhYmxlcm8iLCJfbnVtZXJvQmFyY29zSHVuZGlkb3MiLCJBcnJheSIsIl9mbG90YSIsImdlbmVyYXJUYWJsZXJvIiwiY3JlYXJUYWJsZXJvIiwiQ29sb2NhckZsb3RhIiwiZ2V0RmxvdGFDb21wbGV0YSIsImdldEZsb3RhQmFyY28iLCJpbnNlcnRhckZsb3RhIiwidGFibGVybyIsInVuZGVmaW5lZCIsInRyYXRhckNhc2lsbGFNYXJjYWRhIiwiYXJyYXlFbGVtZW50RWxlbWVudCIsIklOREVNTkUiLCJfbWVkaWRhIiwiZGFtZU51bWVyb0VudHJlTWF4aW1vTWluaW1vIiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZGFtZVNlbnRpZG9BbGVhdG9yaW8iLCJERVJFQ0hBIiwidGFtYW5vQmFyY28iLCJzZW50aWRvQmFyY28iLCJjb29yZGVuYWRhSW5jaWFsIiwic2FsaWRhUG9yTGltaXRlcyIsIkJhcmNvIiwicHVudG9YIiwicHVudG9ZIiwiY29vcmRlbmFkYUJhcmNvIiwic2FsZURlTGltaXRlcyIsIl9zaXplIiwiaW5pY2lhbCIsImRpcmVjY2lvbiIsIl9wb3NpY2lvbmVzIiwicHVzaCIsIkNhc2lsbGEiLCJnZXRDb29yZGVuYWRhQmFyY28iLCJfc3RhdHVzIiwiX2Nvb3JkZW5hZGEiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElB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QyxJQUFyQixXQUNJLE9BQU9KLEtBQUtrRyxhLGdDQUtwQixFQWxDQSxHQUFhLEVBQUFSLFMsK0ZDSGIsaUJBQ0UsV0FBb0JZLEVBQXlCQyxHQUF6QixLQUFBRCxVQUF5QixLQUFBQyxjQXVCL0MsT0FuQkMsc0JBQVcscUJBQU0sQyxJQUFqQixXQUNDLE9BQU92RyxLQUFLc0csUyxJQUliLFNBQWtCdkgsR0FDakJpQixLQUFLc0csUUFBVXZILEcsZ0NBSWhCLHNCQUFXLHlCQUFVLEMsSUFBckIsV0FDQyxPQUFPaUIsS0FBS3VHLGEsSUFJYixTQUFzQnhILEdBQ3JCaUIsS0FBS3VHLFlBQWN4SCxHLGdDQUdyQixFQXhCQSxHQUFhLEVBQUFxSCIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4iLCJpbXBvcnQge1NlbnRpZG99IGZyb20gXCIuL3NlbnRpZG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb29yZGVuYWRhIHtcclxuXHJcbiAgICAvL0xhIGZvcm1hIGRlIHRzIHBhcmEgZGVjbGFyYXIgcHJvcGllZGFkZXMgb2JsaWdhdG9yaWFzXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF94OiBudW1iZXIsIHByaXZhdGUgX3k6IG51bWJlcikge1xyXG4gICAgfVxyXG5cclxuLy9IYXkgY29zYXMgamF2YSBxdWUgc2llbXByZSB2aWVuZW4gYmllblxyXG5cclxuXHJcbiAgICBwdWJsaWMgZ2V0IFgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5feDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IFkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5feTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFgoeHY6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3ggPSB4djtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IFkoeXY6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3kgPSB5djtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXF1YWxzKGNvb3JkZW5hZGE6IENvb3JkZW5hZGEpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5feCA9PSBjb29yZGVuYWRhLlggJiYgdGhpcy5feSA9PSBjb29yZGVuYWRhLlk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBtb3ZlcihzZW50aWRvOiBTZW50aWRvKSB7XHJcbiAgICAgICAgaWYgKHNlbnRpZG8gPT0gU2VudGlkby5BQkFKTykge1xyXG4gICAgICAgICAgICB0aGlzLmJhamFyKClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF2YW56YXIoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmFqYXIoKSB7XHJcbiAgICAgICAgdGhpcy5feSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdmFuemFyKCkge1xyXG4gICAgICAgIHRoaXMuX3grKztcclxuICAgIH1cclxuXHJcblxyXG59XHJcbiIsImV4cG9ydCBlbnVtIEVzdGFkbyB7XHJcblRPQ0FETyxJTkRFTU5FLEhVTkRJRE9cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgRGltZW5zaW9uZXMge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfYW5jaG86IG51bWJlciwgcHJpdmF0ZSBfbGFyZ286IG51bWJlcikge1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhbmNobyh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fYW5jaG8gPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbGFyZ28oKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGFyZ287XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGxhcmdvKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9sYXJnbyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbmNobygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNobztcclxuICAgIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGVudW0gU2VudGlkb3tcclxuQUJBSk8sREVSRUNIQVxyXG59IiwiLy8gRXMgbGEgY2xhc2UgcXVlIGNvbnRpZW5lIHRvZG9zIGxvcyBiYXJjb3NcclxuaW1wb3J0IHtCYXJjb30gZnJvbSBcIi4vYmFyY29cIjtcclxuaW1wb3J0IHtEaW1lbnNpb25lc30gZnJvbSBcIi4vZGltZW5zaW9uZXNcIjtcclxuaW1wb3J0IHtHZW5lcmFkb3JGbG90YX0gZnJvbSBcIi4vZ2VuZXJhZG9yRmxvdGFcIjtcclxuaW1wb3J0IHtFc3RhZG99IGZyb20gXCIuL2VzdGFkb1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZsb3RhIHtcclxuICAgIHByaXZhdGUgX2dlbmVyYWRvckZsb3RhOiBHZW5lcmFkb3JGbG90YTtcclxuICAgIHByaXZhdGUgX2Zsb3RhQmFyY29zOiBCYXJjb1tdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbWVkaWRhczogRGltZW5zaW9uZXMpIHtcclxuICAgICAgICB0aGlzLl9nZW5lcmFkb3JGbG90YSA9IG5ldyBHZW5lcmFkb3JGbG90YSh0aGlzLl9tZWRpZGFzKVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhckZsb3RhcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2VuZXJhckZsb3RhcygpIHtcclxuICAgICAgICBjb25zdCBiYXJjb3MgPSBbNCw0LDMsMywzLDIsMiwyLDJdO1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBiYXJjb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJhcmNvOiBCYXJjbyA9IHRoaXMuX2dlbmVyYWRvckZsb3RhLmNyZWFyQmFyY28oYmFyY29zW2ldKVxyXG4gICAgICAgICAgICB0aGlzLl9mbG90YUJhcmNvc1tpXSA9IGJhcmNvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29tcHJvYmFyQmFyY29IdW5kaWRvKG51bWVyb0JhcmNvc0h1bmRpZG9zOiBudW1iZXIpOiBOdW1iZXIge1xyXG4gICAgICAgIGxldCBiYXJjb3NUb2NhZG9zOiBudW1iZXI7XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuX2Zsb3RhQmFyY29zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJhcmNvc1RvY2Fkb3MgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5nZXRMZW5ndGhGbG90YUJhcmNvcyhpKTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRQb3NpY2lvbkJhcmNvKGksIGopLnN0YXR1cyA9PSBFc3RhZG8uVE9DQURPKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFyY29zVG9jYWRvcysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGJhcmNvc1RvY2Fkb3MgPT0gdGhpcy5nZXRMZW5ndGhGbG90YUJhcmNvcyhpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiSHVuZGlkb1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaHVuZGlyQmFyY28odGhpcy5fZmxvdGFCYXJjb3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG51bWVyb0JhcmNvc0h1bmRpZG9zKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bWVyb0JhcmNvc0h1bmRpZG9zXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMZW5ndGhGbG90YUJhcmNvcyhpOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmxvdGFCYXJjb3NbaV0ucG9zaWNpb25lcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRQb3NpY2lvbkJhcmNvKGk6IG51bWJlciwgajogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zsb3RhQmFyY29zW2ldLnBvc2ljaW9uZXNbal07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBodW5kaXJCYXJjbyhiYXJjbzogQmFyY28pIHtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5nZXRDYXNpbGxhcyhiYXJjbykubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRDYXNpbGxhcyhiYXJjbylbaV0uc3RhdHVzID0gRXN0YWRvLkhVTkRJRE87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q2FzaWxsYXMoYmFyY286IEJhcmNvKSB7XHJcbiAgICAgICAgcmV0dXJuIGJhcmNvLnBvc2ljaW9uZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBmbG90YUJhcmNvcygpOiBCYXJjb1tdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmxvdGFCYXJjb3M7XHJcbiAgICB9XHJcblxyXG5cclxufSIsImltcG9ydCB7SnVlZ299IGZyb20gXCIuL2NvbnRyb2wvanVlZ29cIjtcclxuaW1wb3J0IHtGbG90YX0gZnJvbSBcIi4vbW9kZWwvZmxvdGFcIjtcclxuaW1wb3J0IHtEaW1lbnNpb25lc30gZnJvbSBcIi4vbW9kZWwvZGltZW5zaW9uZXNcIjtcclxuXHJcbmNvbnN0IGp1Z2FkYSA9IG5ldyBKdWVnbygpO1xyXG5sZXQgZjogRmxvdGEgPSBuZXcgRmxvdGEobmV3IERpbWVuc2lvbmVzKDgsIDEyKSlcclxuY29uc29sZS5sb2coZi5mbG90YUJhcmNvcylcclxuLy9qdWdhZGEucGxheSgpXHJcbi8vanVnYWRhLnBsYXkoKVxyXG4iLCJpbXBvcnQge0RpbWVuc2lvbmVzfSBmcm9tIFwiLi4vbW9kZWwvZGltZW5zaW9uZXNcIjtcclxuaW1wb3J0IHtDb29yZGVuYWRhfSBmcm9tIFwiLi4vbW9kZWwvY29vcmRlbmFkYVwiO1xyXG5pbXBvcnQge1RhYmxlcm99IGZyb20gXCIuL3RhYmxlcm9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBKdWVnbyB7XHJcbiAgICBwcml2YXRlIF9tZWRpZGFzVGFibGVybzogRGltZW5zaW9uZXMgPSBuZXcgRGltZW5zaW9uZXMoOCwgMTIpXHJcbiAgICBwcml2YXRlIF90YWJsZXJvOiBUYWJsZXJvID0gbmV3IFRhYmxlcm8odGhpcy5fbWVkaWRhc1RhYmxlcm8pO1xyXG5cclxuXHJcbiAgICBwdWJsaWMgcGxheSgpIHtcclxuICAgICAgICBhbGVydChcIlZpZW52ZW5pZG8gYWwgIEh1bmRpciBsYSBGTG90YSBlbCBqdWVnbyBzZSBkZXNhcnJvbGxhXFxuIGVuIHVuIHRhYmxlcm8gZGUgOHgxMiB5IGNvbnRhbW9zIGNvbiBcXG4gMiBiYXJjb3MgZGUgNCBjYXNpbGxhcyAzIGJhcmNvcyBkZSAzIGNhc2lsbGFzIHkgNCBiYXJjb3MgZGUgMiBjYXNpbGxhc1xcbiBlc3Blcm8gcXVlIGxvIGRpc2ZydXRlc1wiKVxyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMuX3RhYmxlcm8ubW9zdHJhclRhYmxlcm8oKSlcclxuICAgICAgICAgICAgdGhpcy5fdGFibGVyby50cmF0YXJDYXNpbGxhKHRoaXMuU29saWNpdGFyQ29vcmRlbmFkYUFjdHVhY2lvbigpKVxyXG5cclxuICAgICAgICB9d2hpbGUoIXRoaXMuX3RhYmxlcm8uaHVuZGlkYVRvdGFGbG90YSgpKVxyXG4gICAgICAgIGFsZXJ0KFwiRW5ob3JhYnVlbmEgaGFzIGdhbmFkbyB5IHNlZ3VybyBxdWUgaGFicmEgbXVlcnRvIG11Y2hhIGdlbnRlIGVyYW4gY3J1Y2Vyb3MgcG9yIGVsIG1lZGl0ZXJyYW5lb1wiKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgU29saWNpdGFyQ29vcmRlbmFkYUFjdHVhY2lvbigpOiBDb29yZGVuYWRhIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvb3JkZW5hZGEodGhpcy5zb2xpY2l0YXJQdW50b1goKSwgdGhpcy5zb2xpY2l0YXJQdW50b1koKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNvbGljaXRhclB1bnRvWCgpOiBudW1iZXIge1xyXG4gICAgICAgIGRvIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBYOmFueT0gcHJvbXB0KFwiRGFtZSBlbCBwdW50byBlbiBlbGUgZWplIFhcIilcclxuICAgICAgICAgICAgaWYgKFggPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgWCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlICghdGhpcy5jb21wcm9iYXJDb29yZGVuYWRhKFgsIHRoaXMuX21lZGlkYXNUYWJsZXJvLmFuY2hvKSlcclxuICAgICAgICByZXR1cm4gWC0xXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc29saWNpdGFyUHVudG9ZKCk6IG51bWJlciB7XHJcbiAgICAgICAgZG8ge1xyXG5cclxuICAgICAgICAgICAgdmFyIFk6IGFueSA9IHByb21wdChcIkRhbWUgZWwgcHVudG8gZW4gZWxlIGVqZSBZXCIpXHJcbiAgICAgICAgICAgIGlmIChZID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIFkgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSB3aGlsZSAoIXRoaXMuY29tcHJvYmFyQ29vcmRlbmFkYShZLCB0aGlzLl9tZWRpZGFzVGFibGVyby5sYXJnbykpXHJcbiAgICAgICAgcmV0dXJuIFktMVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNvbXByb2JhckNvb3JkZW5hZGEocHVudG86IG51bWJlciwgbWF4aW1vOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAocHVudG8gPCBtYXhpbW8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbn0iLCJpbXBvcnQge0Zsb3RhfSBmcm9tIFwiLi4vbW9kZWwvZmxvdGFcIjtcclxuaW1wb3J0IHtEaW1lbnNpb25lc30gZnJvbSBcIi4uL21vZGVsL2RpbWVuc2lvbmVzXCI7XHJcbmltcG9ydCB7Q2FzaWxsYX0gZnJvbSBcIi4uL21vZGVsL0Nhc2lsbGFcIjtcclxuaW1wb3J0IHtDb29yZGVuYWRhfSBmcm9tIFwiLi4vbW9kZWwvY29vcmRlbmFkYVwiO1xyXG5pbXBvcnQge0VzdGFkb30gZnJvbSBcIi4uL21vZGVsL2VzdGFkb1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlcm8ge1xyXG5cclxuXHJcbiAgICBwcml2YXRlIF9udW1lcm9CYXJjb3NIdW5kaWRvczpudW1iZXI9MFxyXG4gICAgcHJpdmF0ZSBfbWVkaWRhc1RhYmxlcm86IERpbWVuc2lvbmVzO1xyXG4gICAgcHJpdmF0ZSBfZmxvdGE6IEZsb3RhO1xyXG4gICAgcHJpdmF0ZSBfdGFibGVybzogQXJyYXk8YW55PiA9IG5ldyBBcnJheTxhbnk+KCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWVkaWRhc1RhYmxlcm86IERpbWVuc2lvbmVzKSB7XHJcbiAgICAgICAgdGhpcy5fbWVkaWRhc1RhYmxlcm8gPSBtZWRpZGFzVGFibGVybztcclxuICAgICAgICB0aGlzLl9mbG90YSA9IG5ldyBGbG90YSh0aGlzLl9tZWRpZGFzVGFibGVybyk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmFyVGFibGVybygpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmFyVGFibGVybygpIHtcclxuICAgICAgICB0aGlzLmNyZWFyVGFibGVybygpO1xyXG4gICAgICAgIHRoaXMuQ29sb2NhckZsb3RhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhclRhYmxlcm8oKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuX21lZGlkYXNUYWJsZXJvLmFuY2hvOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFibGVyb1tpXSA9IG5ldyBBcnJheSh0aGlzLl9tZWRpZGFzVGFibGVyby5sYXJnbyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgQ29sb2NhckZsb3RhKCkge1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLmdldEZsb3RhQ29tcGxldGEoKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5nZXRGbG90YUJhcmNvKGkpLnBvc2ljaW9uZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0YXJGbG90YSh0aGlzLmdldEZsb3RhQmFyY28oaSkucG9zaWNpb25lc1tqXS5jb29yZGVuYWRhLCB0aGlzLmdldEZsb3RhQmFyY28oaSkucG9zaWNpb25lc1tqXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHByaXZhdGUgaW5zZXJ0YXJGbG90YShjb29yZGVuYWRhOiBDb29yZGVuYWRhLCBiYXJjbzogQ2FzaWxsYSkge1xyXG4gICAgICAgIGxldCBYOiBudW1iZXIgPSBjb29yZGVuYWRhLlhcclxuICAgICAgICBsZXQgWTogbnVtYmVyID0gY29vcmRlbmFkYS5ZXHJcbiAgICAgICAgdGhpcy5fdGFibGVyb1tYXVtZXSA9IGJhcmNvXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGh1bmRpZGFUb3RhRmxvdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtZXJvQmFyY29zSHVuZGlkb3M9PXRoaXMuX2Zsb3RhLmZsb3RhQmFyY29zLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbW9zdHJhclRhYmxlcm8oKTogU3RyaW5nIHtcclxuICAgICAgICBsZXQgdGFibGVybzogU3RyaW5nID0gXCJcIjtcclxuICAgICAgICB0YWJsZXJvKz1cIiAgICAgXCJcclxuICAgICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5fbWVkaWRhc1RhYmxlcm8ubGFyZ287IGorKykge1xyXG4gICAgICAgICAgICB0YWJsZXJvKz0oaisxKStcIiAgfCAgXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFibGVybys9XCJcXG5cIlxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLl9tZWRpZGFzVGFibGVyby5hbmNobzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRhYmxlcm8gKz0gKGkrMSkrXCIgIHwgICBcIlxyXG4gICAgICAgICAgICBmb3IgKGxldCBqOiBudW1iZXIgPSAwOyBqIDwgdGhpcy5fbWVkaWRhc1RhYmxlcm8ubGFyZ287IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFibGVyb1tpXVtqXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZXJvICs9IHRoaXMudHJhdGFyQ2FzaWxsYU1hcmNhZGEodGhpcy50YWJsZXJvW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVybyArPSBcIlggIHwgIFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFibGVybyArPSBcIlxcblwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGFibGVyb1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdHJhdGFyQ2FzaWxsYU1hcmNhZGEoYXJyYXlFbGVtZW50RWxlbWVudDogYW55KSB7XHJcbiAgICAgICAgaWYgKGFycmF5RWxlbWVudEVsZW1lbnQgPT0gXCJXXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVyAgfCAgXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFycmF5RWxlbWVudEVsZW1lbnQuc3RhdHVzPT1Fc3RhZG8uSU5ERU1ORSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJYICB8ICBcIlxyXG4gICAgICAgIH0gZWxzZSBpZiAoYXJyYXlFbGVtZW50RWxlbWVudC5zdGF0dXMgPT0gRXN0YWRvLlRPQ0FETyApe1xyXG4gICAgICAgICAgICByZXR1cm4gXCJUICB8ICBcIlxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm4gXCJIICB8ICBcIlxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHRyYXRhckNhc2lsbGEoY29vcmRlbmFkYTogQ29vcmRlbmFkYSkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS5YXVtjb29yZGVuYWRhLlldID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS5YXVtjb29yZGVuYWRhLlldID0gXCJXXCJcclxuICAgICAgICAgICAgYWxlcnQoXCJBZ3VhXCIpXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS5YXVtjb29yZGVuYWRhLlldLnN0YXR1cyA9PSBFc3RhZG8uSU5ERU1ORSkge1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS5YXVtjb29yZGVuYWRhLlldLnN0YXR1cz1Fc3RhZG8uVE9DQURPXHJcbiAgICAgICAgICAgIGFsZXJ0KFwiVG9jYWRvXCIpXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgdGhpcy5udW1lcm9CYXJjb3NIdW5kaWRvcz10aGlzLl9mbG90YS5jb21wcm9iYXJCYXJjb0h1bmRpZG8odGhpcy5fbnVtZXJvQmFyY29zSHVuZGlkb3MpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQgdGFibGVybygpOiBBcnJheTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGFibGVybztcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RmxvdGFDb21wbGV0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmxvdGEuZmxvdGFCYXJjb3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRGbG90YUJhcmNvKGk6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mbG90YS5mbG90YUJhcmNvc1tpXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbnVtZXJvQmFyY29zSHVuZGlkb3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbnVtZXJvQmFyY29zSHVuZGlkb3M7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG51bWVyb0JhcmNvc0h1bmRpZG9zKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9udW1lcm9CYXJjb3NIdW5kaWRvcyA9IHZhbHVlO1xyXG4gICAgfVxyXG59IiwiLy9HZW5lcmFyIHVuYSBzZXJpZSBkZSBiYXJjb3MgcXVlIG5vIHNlIHNvbGFwYW4geSBxdWUgc29ydGVhbiBsYSBwb3NpY2lvbiBpbmNpYWwgZGUgY2FkYSBiYXJjb1xyXG4vLyB5IGVsIHNlbnRpZG8gZW4gcXVlIGNyZWNlbiBhZGVtYXMgZWwgYXJyYXkgZGUgYmFyY29zIGNyZWFkbyBhc2VndXJhIHF1ZSBuaW5ndW5vIHNlIGhhIHNvbGFwYWRvIG5lY2VzaXRhXHJcbi8vIGNvbm9jZXIgbGEgcG9zaWNpb24gbWF4aW1hIGEgbGEgcXVlIHB1ZWRlIGRlc3BsZWdhciB1biBiYXJjbyAobWF4aW1vIGZpbGEgbyBjb2x1bW5hKVxyXG5cclxuaW1wb3J0IHtEaW1lbnNpb25lc30gZnJvbSBcIi4vZGltZW5zaW9uZXNcIlxyXG5pbXBvcnQge0JhcmNvfSBmcm9tIFwiLi9iYXJjb1wiXHJcbmltcG9ydCB7U2VudGlkb30gZnJvbSBcIi4vc2VudGlkb1wiO1xyXG5pbXBvcnQge0Nvb3JkZW5hZGF9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW5lcmFkb3JGbG90YSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbWVkaWRhOiBEaW1lbnNpb25lcykge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGFtZU51bWVyb0VudHJlTWF4aW1vTWluaW1vKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtaW4gLSBtYXgpICsgbWF4KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGFtZVNlbnRpZG9BbGVhdG9yaW8oKTogU2VudGlkbyB7XHJcbiAgICAgICAgbGV0IHNlbnRpZG86IFNlbnRpZG9cclxuICAgICAgICAodGhpcy5kYW1lTnVtZXJvRW50cmVNYXhpbW9NaW5pbW8oLTEsIDIpID09IDEpID8gc2VudGlkbyA9IFNlbnRpZG8uREVSRUNIQSA6IHNlbnRpZG8gPSBTZW50aWRvLkFCQUpPO1xyXG4gICAgICAgIHJldHVybiBzZW50aWRvXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWFyQmFyY28odGFtYW5vQmFyY286IG51bWJlcik6IEJhcmNvIHtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2YXIgc2VudGlkb0JhcmNvOiBTZW50aWRvID0gdGhpcy5kYW1lU2VudGlkb0FsZWF0b3JpbygpO1xyXG4gICAgICAgICAgICB2YXIgY29vcmRlbmFkYUluY2lhbDogQ29vcmRlbmFkYSA9IHRoaXMuY29vcmRlbmFkYUluY2lhbCgpO1xyXG5cclxuICAgICAgICB9IHdoaWxlICh0aGlzLnNhbGlkYVBvckxpbWl0ZXMoY29vcmRlbmFkYUluY2lhbCwgdGFtYW5vQmFyY28sIHNlbnRpZG9CYXJjbykpXHJcbiAgICAgICAgdmFyIGJhcmNvOiBCYXJjbyA9IG5ldyBCYXJjbyh0YW1hbm9CYXJjbywgY29vcmRlbmFkYUluY2lhbCwgc2VudGlkb0JhcmNvKVxyXG4gICAgICAgIHJldHVybiBiYXJjbztcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBjb29yZGVuYWRhSW5jaWFsKCk6IENvb3JkZW5hZGEge1xyXG5cclxuICAgICAgICB2YXIgcHVudG9YOiBudW1iZXIgPSB0aGlzLmRhbWVOdW1lcm9FbnRyZU1heGltb01pbmltbygwLCB0aGlzLl9tZWRpZGEuYW5jaG8pXHJcbiAgICAgICAgdmFyIHB1bnRvWTogbnVtYmVyID0gdGhpcy5kYW1lTnVtZXJvRW50cmVNYXhpbW9NaW5pbW8oMCwgdGhpcy5fbWVkaWRhLmxhcmdvKVxyXG4gICAgICAgIHJldHVybiBuZXcgQ29vcmRlbmFkYShwdW50b1gsIHB1bnRvWSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzYWxpZGFQb3JMaW1pdGVzKGNvb3JkZW5hZGFCYXJjbzogQ29vcmRlbmFkYSwgdGFtYW5vQmFyY286IG51bWJlciwgc2VudGlkb0JhcmNvOiBTZW50aWRvKSB7XHJcbiAgICAgICAgbGV0IHBvc2ljaW9uVG90YWxCYXJjbzogbnVtYmVyO1xyXG4gICAgICAgIGxldCBzYWxlRGVMaW1pdGVzOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHNlbnRpZG9CYXJjbyA9PSBTZW50aWRvLkFCQUpPKSB7XHJcbiAgICAgICAgICAgIHBvc2ljaW9uVG90YWxCYXJjbyA9IHRhbWFub0JhcmNvICsgY29vcmRlbmFkYUJhcmNvLlk7XHJcbiAgICAgICAgICAgIGlmIChwb3NpY2lvblRvdGFsQmFyY28gPiB0aGlzLl9tZWRpZGEubGFyZ28pIHNhbGVEZUxpbWl0ZXMgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcG9zaWNpb25Ub3RhbEJhcmNvID0gdGFtYW5vQmFyY28gKyBjb29yZGVuYWRhQmFyY28uWDtcclxuICAgICAgICAgICAgaWYgKHBvc2ljaW9uVG90YWxCYXJjbyA+IHRoaXMuX21lZGlkYS5hbmNobykgc2FsZURlTGltaXRlcyA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNhbGVEZUxpbWl0ZXM7XHJcbiAgICB9XHJcblxyXG5cclxufSIsImltcG9ydCB7Q2FzaWxsYX0gZnJvbSBcIi4vQ2FzaWxsYVwiO1xyXG5pbXBvcnQge0Nvb3JkZW5hZGF9IGZyb20gXCIuL2Nvb3JkZW5hZGFcIjtcclxuaW1wb3J0IHtTZW50aWRvfSBmcm9tIFwiLi9zZW50aWRvXCI7XHJcbmltcG9ydCB7RXN0YWRvfSBmcm9tIFwiLi9lc3RhZG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXJjbyB7XHJcbiAgICBwcml2YXRlIF9wb3NpY2lvbmVzOiBDYXNpbGxhW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zaXplOiBudW1iZXIsIGluaWNpYWw6IENvb3JkZW5hZGEsIGRpcmVjY2lvbjogU2VudGlkbykge1xyXG4gICAgICAgIHRoaXMuY3JlYXJCYXJjbyhpbmljaWFsLCBkaXJlY2Npb24pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhckJhcmNvKGluaWNpYWw6IENvb3JkZW5hZGEsIGRpcmVjY2lvbjogU2VudGlkbykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc2ljaW9uZXMucHVzaChuZXcgQ2FzaWxsYShFc3RhZG8uSU5ERU1ORSwgbmV3IENvb3JkZW5hZGEoaW5pY2lhbC5YLCBpbmljaWFsLlkpKSk7XHJcblxyXG4gICAgICAgICAgICAvL1RlbmVtb3MgZWwgcHJvYmxlbWEgZGUgcXVlIGVzdGEgdGFyZWEgbm8gbGUgY29ycmVzcG9uZGUgYSBiYXJjb1xyXG4vLyAgICAgICAgaWYgKHNlbnRpZG89PVNlbnRpZG8uQUJBSk8pIHtcclxuLy8gICAgICAgICAgdGhpcy5iYWphcigpXHJcbi8vICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgIHRoaXMuYXZhbnphcigpXHJcbi8vICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vUGVybyBzaSBxdWUgbGUgY29ycmVzcG9uZGUgYSBjb29yZGVuYWRhc1xyXG4gICAgICAgICAgICBpbmljaWFsLm1vdmVyKGRpcmVjY2lvbik7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHByaXZhdGUgZ2V0Q29vcmRlbmFkYUJhcmNvKGo6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2ljaW9uZXNbal0uY29vcmRlbmFkYTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHBvc2ljaW9uZXMoKTogQ2FzaWxsYVtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaWNpb25lcztcclxuICAgIH1cclxuXHJcblxyXG5cclxufSIsImltcG9ydCB7IENvb3JkZW5hZGEgfSBmcm9tIFwiLi9jb29yZGVuYWRhXCI7XHJcbmltcG9ydCB7IEVzdGFkbyB9IGZyb20gXCIuL2VzdGFkb1wiO1xyXG5leHBvcnQgY2xhc3MgQ2FzaWxsYSB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfc3RhdHVzOiBFc3RhZG8sIHByaXZhdGUgX2Nvb3JkZW5hZGE6IENvb3JkZW5hZGEpIHtcclxuICB9XHJcbiAgXHJcbiAgXHJcblx0cHVibGljIGdldCBzdGF0dXMoKTogRXN0YWRvIHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGF0dXM7XHJcblx0fVxyXG5cclxuIFxyXG5cdHB1YmxpYyBzZXQgc3RhdHVzKHZhbHVlOiBFc3RhZG8pIHtcclxuXHRcdHRoaXMuX3N0YXR1cyA9IHZhbHVlO1xyXG5cdH1cclxuXHJcbiAgICBcclxuXHRwdWJsaWMgZ2V0IGNvb3JkZW5hZGEoKTogQ29vcmRlbmFkYSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fY29vcmRlbmFkYTtcclxuXHR9XHJcblxyXG4gICBcclxuXHRwdWJsaWMgc2V0IGNvb3JkZW5hZGEodmFsdWU6IENvb3JkZW5hZGEpIHtcclxuXHRcdHRoaXMuX2Nvb3JkZW5hZGEgPSB2YWx1ZTtcclxuXHR9XHJcbiAgXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==