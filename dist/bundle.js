!function(e){var o={};function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(n,r,function(o){return e[o]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=2)}([function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Sentido=void 0,function(e){e[e.abajo=0]="abajo",e[e.derecha=1]="derecha"}(o.Sentido||(o.Sentido={}))},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Coordenada=void 0;var n=t(0),r=function(){function e(e,o){this._x=e,this._y=o}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._x=e},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return this.x==e.x&&this.y==e.y},e.prototype.mover=function(e){e==n.Sentido.abajo?this.bajar():this.avanzar()},e.prototype.bajar=function(){this._y++},e.prototype.avanzar=function(){this._x++},e}();o.Coordenada=r},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),(new(t(10).Jugada)).play()},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Dimension=void 0;var n=function(){function e(e,o){this._altoD=e,this._anchoD=o}return Object.defineProperty(e.prototype,"altoD",{get:function(){return this._altoD},set:function(e){this._altoD=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchoD",{get:function(){return this._anchoD},set:function(e){this._anchoD=e},enumerable:!1,configurable:!0}),e}();o.Dimension=n},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Tablero=void 0;var n=t(5),r=t(9),i=function(){function e(e){this._tablero=new Array,this._barcosHundidos=0,this._dimension=e,this._flota=new n.Flota(this._dimension),this.crearTablero(),this.colocarBarcos()}return e.prototype.crearTablero=function(){for(var e=0;e<this._dimension.altoD;e++)this._tablero[e]=new Array(this._dimension.anchoD)},e.prototype.colocarBarcos=function(){console.log(this._flota.almacenDeBarcos);for(var e=this._flota.almacenDeBarcos,o=0;o<e.length;o++)for(var t=e[o].posiciones,n=0;n<t.length;n++){var r=t[n].coordenada.x,i=t[n].coordenada.y;this.tablero[i][r]=this._flota.almacenDeBarcos[o].posiciones[n]}},e.prototype.mostrarTablero=function(){var e="";e+="     ";for(var o=0;o<this._dimension.anchoD;o++)e+=o+1+"  |  ";e+="\n";for(var t=0;t<this._dimension.altoD;t++){e+=t+1+"  |   ";for(o=0;o<this._dimension.anchoD;o++)null!=this.tablero[t][o]?e+=this.pintarCasilla(this.tablero[t][o]):e+="X  |  ";e+="\n"}return e},e.prototype.pintarCasilla=function(e){return"W"==e?"W  |  ":e.estado==r.Estado.indemne?"B  |  ":e.estado==r.Estado.tocado?"T  |  ":"H  |  "},e.prototype.asignarEstadoCasilla=function(e){null==this.tablero[e.x][e.y]?(alert("agua"),this.tablero[e.x][e.y]="W"):this.tablero[e.x][e.y].estado==r.Estado.indemne&&(alert("tocado"),this.tablero[e.x][e.y].estado=r.Estado.tocado,this._barcosHundidos=this._flota.comprobarBarcoHundido(this._barcosHundidos))},e.prototype.comprobarFlotaTotalHundida=function(){return this._barcosHundidos==this._flota.almacenDeBarcos.length},Object.defineProperty(e.prototype,"flota",{get:function(){return this._flota},set:function(e){this._flota=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tablero",{get:function(){return this._tablero},set:function(e){this._tablero=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dimension",{get:function(){return this._dimension},set:function(e){this._dimension=e},enumerable:!1,configurable:!0}),e}();o.Tablero=i},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Flota=void 0;var n=t(6),r=t(9),i=function(){function e(e){this._dimensiones=e,this._almacenDeBarcos=[],this._fabricaDeBarcos=new n.GeneradorFlota(this._dimensiones),this.generarFlota()}return e.prototype.generarFlota=function(){for(var e=[4,4,3,3,3,2,2,2,2],o=0;o<e.length;o++)this._almacenDeBarcos[o]=this._fabricaDeBarcos.crearBarco(e[o],this._almacenDeBarcos)},Object.defineProperty(e.prototype,"almacenDeBarcos",{get:function(){return this._almacenDeBarcos},set:function(e){this._almacenDeBarcos=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fabricaDeBarcos",{get:function(){return this._fabricaDeBarcos},set:function(e){this._fabricaDeBarcos=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dimensiones",{get:function(){return this._dimensiones},set:function(e){this._dimensiones=e},enumerable:!1,configurable:!0}),e.prototype.comprobarBarcoHundido=function(e){for(var o=0,t=0;t<this.almacenDeBarcos.length;t++){o=0;for(var n=0;n<this.almacenDeBarcos[t].posiciones.length;n++)this.almacenDeBarcos[t].posiciones[n].estado==r.Estado.tocado&&++o==this.almacenDeBarcos[t].posiciones.length&&(alert("Hundido"),this.hundirBarco(this.almacenDeBarcos[t]),e++)}return e},e.prototype.hundirBarco=function(e){for(var o=0;o<e.posiciones.length;o++)e.posiciones[o].estado=r.Estado.hundido},e}();o.Flota=i},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.GeneradorFlota=void 0;var n=t(0),r=t(1),i=t(7),a=function(){function e(e){this._dimensiones=e}return e.prototype.dameNumeroAleatorioEntreMaxMin=function(e,o){return Math.floor(Math.random()*(e-o)+o)},e.prototype.dameSentidoAleatorio=function(){return 1==this.dameNumeroAleatorioEntreMaxMin(-1,2)?n.Sentido.derecha:n.Sentido.abajo},e.prototype.dameCoordenadaInical=function(e,o){do{var t=this.dameNumeroAleatorioEntreMaxMin(0,this._dimensiones.anchoD),n=this.dameNumeroAleatorioEntreMaxMin(0,this._dimensiones.altoD),i=new r.Coordenada(t,n)}while(!this.entraElBarcoEnLosLimites(e,i,o));return i},e.prototype.crearBarco=function(e,o){do{var t=this.dameSentidoAleatorio(),n=this.dameCoordenadaInical(e,t),r=new i.Barco(e,n,t)}while(this.exixteSolapamiento(r,o));return r},e.prototype.entraElBarcoEnLosLimites=function(e,o,t){var r=!0;return t==n.Sentido.abajo?e+o.y>this._dimensiones.altoD&&(r=!1):e+o.x>this._dimensiones.anchoD&&(r=!1),r},e.prototype.exixteSolapamiento=function(e,o){for(var t=0;t<o.length;t++)if(e.compruebaSolapamiento(o[t].posiciones))return!0;return!1},e}();o.GeneradorFlota=a},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Barco=void 0;var n=t(1),r=t(8),i=t(9),a=function(){function e(e,o,t){this._size=e,this._posiciones=[],this.crearBarco(o,t)}return e.prototype.crearBarco=function(e,o){for(var t=0;t<this.size;t++)this.posiciones.push(new r.Casilla(new n.Coordenada(e.x,e.y),i.Estado.indemne)),e.mover(o)},e.prototype.compruebaSolapamiento=function(e){for(var o=0;o<e.length;o++)for(var t=0;t<this._posiciones.length;t++)if(this.posiciones[t].coordenada.equals(e[o].coordenada))return!0;return!1},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"posiciones",{get:function(){return this._posiciones},set:function(e){this._posiciones=e},enumerable:!1,configurable:!0}),e}();o.Barco=a},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Casilla=void 0;var n=function(){function e(e,o){this._coordenada=e,this._estado=o}return Object.defineProperty(e.prototype,"coordenada",{get:function(){return this._coordenada},set:function(e){this._coordenada=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"estado",{get:function(){return this._estado},set:function(e){this._estado=e},enumerable:!1,configurable:!0}),e}();o.Casilla=n},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Estado=void 0,function(e){e[e.tocado=0]="tocado",e[e.indemne=1]="indemne",e[e.hundido=2]="hundido"}(o.Estado||(o.Estado={}))},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.Jugada=void 0;var n=t(3),r=t(4),i=t(1),a=function(){function e(){this._dimensiones=new n.Dimension(8,12),this._tablero=new r.Tablero(this._dimensiones)}return e.prototype.play=function(){alert("Hundir la flota\n El juego tiene un tablero de 8*12 y 9 barcos repartido por el tablero\n de diferentes tamaÃ±os"),console.log(this._tablero.tablero);do{alert(this._tablero.mostrarTablero()),this._tablero.asignarEstadoCasilla(this.SolicitarCoordenadaActuacion())}while(!this._tablero.comprobarFlotaTotalHundida());alert("Victoria, has hundido la flota")},e.prototype.SolicitarCoordenadaActuacion=function(){return new i.Coordenada(this.solicitarPuntoY(),this.solicitarPuntoX())},e.prototype.solicitarPuntoX=function(){do{var e=prompt("Dame el punto en ele eje X");""==e?e=0:e-=1}while(!this.comprobarCoordenada(e,this._dimensiones.anchoD));return e},e.prototype.solicitarPuntoY=function(){do{var e=prompt("Dame el punto en ele eje Y");""==e?e=0:e-=1}while(!this.comprobarCoordenada(e,this._dimensiones.altoD));return e},e.prototype.comprobarCoordenada=function(e,o){return e<o},e}();o.Jugada=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9zZW50aWRvLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vY29vcmRlbmFkYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2RpbWVuc2lvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL3RhYmxlcm8udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9mbG90YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxvL2dlbmVyYWRvckZsb3RhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vYmFyY28udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsby9jYXNpbGxhLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vZXN0YWRvLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbG8vanVnYWRhLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU2VudGlkbyIsIl94IiwiX3kiLCJ0aGlzIiwieHMiLCJ5cyIsImVxdWFscyIsImNvb3JkZW5hZGEiLCJ4IiwieSIsIm1vdmVyIiwiZGlyZWNjaW9uIiwiYWJham8iLCJiYWphciIsImF2YW56YXIiLCJDb29yZGVuYWRhIiwiSnVnYWRhIiwicGxheSIsIl9hbHRvRCIsIl9hbmNob0QiLCJEaW1lbnNpb24iLCJkaW1lbnNpb24iLCJfdGFibGVybyIsIkFycmF5IiwiX2JhcmNvc0h1bmRpZG9zIiwiX2RpbWVuc2lvbiIsIl9mbG90YSIsIkZsb3RhIiwiY3JlYXJUYWJsZXJvIiwiY29sb2NhckJhcmNvcyIsImFsdG9EIiwiYW5jaG9EIiwiY29uc29sZSIsImxvZyIsImFsbWFjZW5EZUJhcmNvcyIsImFsbWFjZW5CYXJjb3MiLCJsZW5ndGgiLCJjYXNpbGxhcyIsInBvc2ljaW9uZXMiLCJqIiwidGFibGVybyIsIm1vc3RyYXJUYWJsZXJvIiwidW5kZWZpbmVkIiwicGludGFyQ2FzaWxsYSIsImFycmF5RWxlbWVudEVsZW1lbnQiLCJlc3RhZG8iLCJFc3RhZG8iLCJpbmRlbW5lIiwidG9jYWRvIiwiYXNpZ25hckVzdGFkb0Nhc2lsbGEiLCJhbGVydCIsImNvbXByb2JhckJhcmNvSHVuZGlkbyIsImNvbXByb2JhckZsb3RhVG90YWxIdW5kaWRhIiwiVGFibGVybyIsIl9kaW1lbnNpb25lcyIsIl9hbG1hY2VuRGVCYXJjb3MiLCJfZmFicmljYURlQmFyY29zIiwiR2VuZXJhZG9yRmxvdGEiLCJnZW5lcmFyRmxvdGEiLCJ0YW1hbm5vc0RlQmFyY29zIiwiY3JlYXJCYXJjbyIsImJhcmNvc1RvY2Fkb3MiLCJodW5kaXJCYXJjbyIsImJhcmNvIiwiaHVuZGlkbyIsImRhbWVOdW1lcm9BbGVhdG9yaW9FbnRyZU1heE1pbiIsIm1pbmltbyIsIm1heGltbyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImRhbWVTZW50aWRvQWxlYXRvcmlvIiwiZGVyZWNoYSIsImRhbWVDb29yZGVuYWRhSW5pY2FsIiwic2l6ZSIsInNlbnRpZG8iLCJlbnRyYUVsQmFyY29Fbkxvc0xpbWl0ZXMiLCJpbmljaWFsIiwiQmFyY28iLCJleGl4dGVTb2xhcGFtaWVudG8iLCJjb29yZGVuYWRhSW5pY2lhbCIsInNhbGVEZUxvc0xJbWl0ZXMiLCJjb21wcnVlYmFTb2xhcGFtaWVudG8iLCJfc2l6ZSIsIl9wb3NpY2lvbmVzIiwiaW5kZXgiLCJwdXNoIiwiQ2FzaWxsYSIsImNhc2lsbGEiLCJpbmRleE9iamVjdCIsIl9jb29yZGVuYWRhIiwiX2VzdGFkbyIsIlNvbGljaXRhckNvb3JkZW5hZGFBY3R1YWNpb24iLCJzb2xpY2l0YXJQdW50b1kiLCJzb2xpY2l0YXJQdW50b1giLCJYIiwicHJvbXB0IiwiY29tcHJvYmFyQ29vcmRlbmFkYSIsIlkiLCJwdW50byJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFW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QSxPQUVBLDBCQUVZLEtBQUFRLGFBQTBCLElBQUksRUFBQWxDLFVBQVUsRUFBRyxJQUMzQyxLQUFBRSxTQUFvQixJQUFJLEVBQUErQixRQUFRbEQsS0FBS21ELGNBdURqRCxPQXBEVyxZQUFBckMsS0FBUCxXQUNJaUMsTUFBTSxtSEFDTmxCLFFBQVFDLElBQUk5QixLQUFLbUIsU0FBU2tCLFNBQzFCLEdBQ0lVLE1BQU0vQyxLQUFLbUIsU0FBU21CLGtCQUNwQnRDLEtBQUttQixTQUFTMkIscUJBQXFCOUMsS0FBS3lGLHVDQUVwQ3pGLEtBQUttQixTQUFTOEIsOEJBQ3RCRixNQUFNLG1DQUdGLFlBQUEwQyw2QkFBUixXQUNJLE9BQU8sSUFBSSxFQUFBN0UsV0FBV1osS0FBSzBGLGtCQUFtQjFGLEtBQUsyRixvQkFHL0MsWUFBQUEsZ0JBQVIsV0FDSSxFQUFHLENBRUMsSUFBSUMsRUFBT0MsT0FBTyw4QkFDVCxJQUFMRCxFQUNBQSxFQUFJLEVBR0pBLEdBQUcsU0FFRDVGLEtBQUs4RixvQkFBb0JGLEVBQUc1RixLQUFLbUQsYUFBYXZCLFNBQ3hELE9BQU9nRSxHQUlILFlBQUFGLGdCQUFSLFdBQ0ksRUFBRyxDQUVDLElBQUlLLEVBQVNGLE9BQU8sOEJBQ1gsSUFBTEUsRUFDQUEsRUFBSSxFQUdKQSxHQUFHLFNBRUQvRixLQUFLOEYsb0JBQW9CQyxFQUFHL0YsS0FBS21ELGFBQWF4QixRQUN4RCxPQUFPb0UsR0FJSCxZQUFBRCxvQkFBUixTQUE0QkUsRUFBZWhDLEdBQ3ZDLE9BQUlnQyxFQUFRaEMsR0FNcEIsRUExREEsR0FBYSxFQUFBbkQiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiZXhwb3J0IGVudW0gU2VudGlkb3tcclxuYWJham8sZGVyZWNoYVxyXG5cclxufSIsImltcG9ydCB7IFNlbnRpZG8gfSBmcm9tIFwiLi9zZW50aWRvXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29vcmRlbmFkYXtcclxuXHJcblxyXG4vLyBsYSBmb3JtYSB0cyBwYXJhIGRlY2xhcmFyIHByb3BpZWRhZGVzIG9ibGlnYXRvcmlhc1xyXG5jb25zdHJ1Y3Rvcihwcml2YXRlIF94Om51bWJlcixwcml2YXRlIF95Om51bWJlcil7XHJcblxyXG5cclxufVxyXG5cclxuXHJcbnB1YmxpYyBnZXQgeCgpe1xyXG4gIHJldHVybiB0aGlzLl94O1xyXG59XHJcblxyXG5cclxuICBwdWJsaWMgc2V0IHgoeHM6bnVtYmVyKXtcclxuICAgIHRoaXMuX3g9IHhzO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBnZXQgeSgpe1xyXG4gIHJldHVybiB0aGlzLl95O1xyXG59XHJcblxyXG5cclxuICBwdWJsaWMgc2V0IHkoeXM6bnVtYmVyKXtcclxuICAgIHRoaXMuX3g9IHlzO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vaGF5IGNvc2FzIGphdmEgcXVlIHNpZW1wcmUgdmllbmVuIGJpZW5cclxuICBwdWJsaWMgZXF1YWxzKGNvb3JkZW5hZGE6Q29vcmRlbmFkYSk6Ym9vbGVhbiB7XHJcbiAgXHJcbiAgcmV0dXJuIHRoaXMueD09Y29vcmRlbmFkYS54ICYmIHRoaXMueT09Y29vcmRlbmFkYS55O1xyXG59XHJcblxyXG5wdWJsaWMgbW92ZXIoZGlyZWNjaW9uOlNlbnRpZG8pIHtcclxuICAgaWYgKGRpcmVjY2lvbj09IFNlbnRpZG8uYWJham8pIHtcclxuICAgICAgICB0aGlzLmJhamFyKCk7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMuYXZhbnphcigpO1xyXG4gICAgICB9XHJcbn1cclxuXHJcbnB1YmxpYyBiYWphcigpe1xyXG4gIHRoaXMuX3krKztcclxufVxyXG5cclxuXHJcbnB1YmxpYyBhdmFuemFyKCl7XHJcbiAgdGhpcy5feCsrO1xyXG59XHJcbn1cclxuIiwiaW1wb3J0IHtGbG90YX0gZnJvbSBcIi4vbW9kZWxvL2Zsb3RhXCI7XHJcbmltcG9ydCB7RGltZW5zaW9ufSBmcm9tIFwiLi9tb2RlbG8vZGltZW5zaW9uXCI7XHJcbmltcG9ydCB7VGFibGVyb30gZnJvbSBcIi4vbW9kZWxvL3RhYmxlcm9cIjtcclxuaW1wb3J0IHtKdWdhZGF9IGZyb20gXCIuL21vZGVsby9qdWdhZGFcIjtcclxuXHJcbmNvbnN0IGp1Z2FkYTpKdWdhZGE9bmV3IEp1Z2FkYSgpO1xyXG5qdWdhZGEucGxheSgpO1xyXG5cclxuXHJcbiIsImV4cG9ydCBjbGFzcyBEaW1lbnNpb257XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9hbHRvRDpudW1iZXIscHJpdmF0ZSBfYW5jaG9EOm51bWJlcikge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBnZXQgYWx0b0QoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWx0b0Q7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGFsdG9EKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLl9hbHRvRCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBhbmNob0QoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9EO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhbmNob0QodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX2FuY2hvRCA9IHZhbHVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtGbG90YX0gZnJvbSBcIi4vZmxvdGFcIjtcclxuaW1wb3J0IHtEaW1lbnNpb259IGZyb20gXCIuL2RpbWVuc2lvblwiO1xyXG5pbXBvcnQge0VzdGFkb30gZnJvbSBcIi4vZXN0YWRvXCI7XHJcbmltcG9ydCB7Q29vcmRlbmFkYX0gZnJvbSBcIi4vY29vcmRlbmFkYVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRhYmxlcm97XHJcbiAgICBwcml2YXRlIF9mbG90YTpGbG90YTtcclxuICAgIHByaXZhdGUgX3RhYmxlcm86QXJyYXk8YW55Pj1uZXcgQXJyYXk8YW55PigpO1xyXG4gICAgcHJpdmF0ZSBfZGltZW5zaW9uOkRpbWVuc2lvbjtcclxuICAgIHByaXZhdGUgX2JhcmNvc0h1bmRpZG9zOm51bWJlcj0wO1xyXG4gICAgY29uc3RydWN0b3IoIGRpbWVuc2lvbjpEaW1lbnNpb24pIHtcclxuICAgICAgICB0aGlzLl9kaW1lbnNpb249ZGltZW5zaW9uO1xyXG4gICAgICAgIHRoaXMuX2Zsb3RhPW5ldyBGbG90YSh0aGlzLl9kaW1lbnNpb24pO1xyXG4gICAgICAgIHRoaXMuY3JlYXJUYWJsZXJvKCk7XHJcbiAgICAgICAgdGhpcy5jb2xvY2FyQmFyY29zKClcclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICBwcml2YXRlIGNyZWFyVGFibGVybygpe1xyXG4gICAgICAgIGZvciAobGV0IGk6bnVtYmVyPTA7IGk8dGhpcy5fZGltZW5zaW9uLmFsdG9EOyBpKyspe1xyXG4gICAgICAgICAgICB0aGlzLl90YWJsZXJvW2ldPSBuZXcgQXJyYXkodGhpcy5fZGltZW5zaW9uLmFuY2hvRCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY29sb2NhckJhcmNvcygpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2Zsb3RhLmFsbWFjZW5EZUJhcmNvcyk7XHJcbiAgICAgICAgbGV0IGFsbWFjZW5CYXJjb3M9dGhpcy5fZmxvdGEuYWxtYWNlbkRlQmFyY29zO1xyXG4gICAgICAgIGZvciAobGV0IGk6bnVtYmVyPTA7aTxhbG1hY2VuQmFyY29zLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgY2FzaWxsYXM9YWxtYWNlbkJhcmNvc1tpXS5wb3NpY2lvbmVzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqOm51bWJlcj0wO2o8Y2FzaWxsYXMubGVuZ3RoO2orKyl7XHJcbiAgICAgICAgICAgICAgICBsZXQgeDpudW1iZXI9Y2FzaWxsYXNbal0uY29vcmRlbmFkYS54O1xyXG4gICAgICAgICAgICAgICAgbGV0IHk6bnVtYmVyPWNhc2lsbGFzW2pdLmNvb3JkZW5hZGEueTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlcm9beV1beF09dGhpcy5fZmxvdGEuYWxtYWNlbkRlQmFyY29zW2ldLnBvc2ljaW9uZXNbal07XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBtb3N0cmFyVGFibGVybygpOiBTdHJpbmcge1xyXG4gICAgICAgIGxldCB0YWJsZXJvOiBTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRhYmxlcm8rPVwiICAgICBcIlxyXG4gICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCB0aGlzLl9kaW1lbnNpb24uYW5jaG9EOyBqKyspIHtcclxuICAgICAgICAgICAgdGFibGVybys9KGorMSkrXCIgIHwgIFwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhYmxlcm8rPVwiXFxuXCJcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5fZGltZW5zaW9uLmFsdG9EOyBpKyspIHtcclxuICAgICAgICAgICAgdGFibGVybyArPSAoaSsxKStcIiAgfCAgIFwiXHJcbiAgICAgICAgICAgIGZvciAobGV0IGo6IG51bWJlciA9IDA7IGogPCB0aGlzLl9kaW1lbnNpb24uYW5jaG9EOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlcm9baV1bal0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVybyArPSB0aGlzLnBpbnRhckNhc2lsbGEodGhpcy50YWJsZXJvW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVybyArPSBcIlggIHwgIFwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFibGVybyArPSBcIlxcblwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGFibGVyb1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGludGFyQ2FzaWxsYShhcnJheUVsZW1lbnRFbGVtZW50OiBhbnkpIHtcclxuICAgICAgICBpZiAoYXJyYXlFbGVtZW50RWxlbWVudCA9PSBcIldcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJXICB8ICBcIlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyYXlFbGVtZW50RWxlbWVudC5lc3RhZG89PUVzdGFkby5pbmRlbW5lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkIgIHwgIFwiXHJcbiAgICAgICAgfSBlbHNlIGlmIChhcnJheUVsZW1lbnRFbGVtZW50LmVzdGFkbyA9PSBFc3RhZG8udG9jYWRvICl7XHJcbiAgICAgICAgICAgIHJldHVybiBcIlQgIHwgIFwiXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkggIHwgIFwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzaWduYXJFc3RhZG9DYXNpbGxhKGNvb3JkZW5hZGE6IENvb3JkZW5hZGEpIHtcclxuICAgICAgICBpZiAodGhpcy50YWJsZXJvW2Nvb3JkZW5hZGEueF1bY29vcmRlbmFkYS55XT09dW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgYWxlcnQoXCJhZ3VhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS54XVtjb29yZGVuYWRhLnldPVwiV1wiO1xyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMudGFibGVyb1tjb29yZGVuYWRhLnhdW2Nvb3JkZW5hZGEueV0uZXN0YWRvPT1Fc3RhZG8uaW5kZW1uZSl7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwidG9jYWRvXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlcm9bY29vcmRlbmFkYS54XVtjb29yZGVuYWRhLnldLmVzdGFkbz1Fc3RhZG8udG9jYWRvO1xyXG4gICAgICAgICAgICB0aGlzLl9iYXJjb3NIdW5kaWRvcz10aGlzLl9mbG90YS5jb21wcm9iYXJCYXJjb0h1bmRpZG8odGhpcy5fYmFyY29zSHVuZGlkb3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICBwdWJsaWMgY29tcHJvYmFyRmxvdGFUb3RhbEh1bmRpZGEoKTpCb29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5fYmFyY29zSHVuZGlkb3M9PXRoaXMuX2Zsb3RhLmFsbWFjZW5EZUJhcmNvcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgZ2V0IGZsb3RhKCk6IEZsb3RhIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmxvdGE7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZsb3RhKHZhbHVlOiBGbG90YSkge1xyXG4gICAgICAgIHRoaXMuX2Zsb3RhID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRhYmxlcm8oKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhYmxlcm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRhYmxlcm8odmFsdWU6IEFycmF5PGFueT4pIHtcclxuICAgICAgICB0aGlzLl90YWJsZXJvID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRpbWVuc2lvbigpOiBEaW1lbnNpb24ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb247XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRpbWVuc2lvbih2YWx1ZTogRGltZW5zaW9uKSB7XHJcbiAgICAgICAgdGhpcy5fZGltZW5zaW9uID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG5cclxufSIsIi8vZXMgbGEgY2xhc2UgcXVlIGNvbnRpZW5lIHRvZG8gbG9zIGJhcmNvc1xyXG5pbXBvcnQge0RpbWVuc2lvbn0gZnJvbSBcIi4vZGltZW5zaW9uXCI7XHJcbmltcG9ydCB7QmFyY299IGZyb20gXCIuL2JhcmNvXCI7XHJcbmltcG9ydCB7R2VuZXJhZG9yRmxvdGF9IGZyb20gXCIuL2dlbmVyYWRvckZsb3RhXCI7XHJcbmltcG9ydCB7RXN0YWRvfSBmcm9tIFwiLi9lc3RhZG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGbG90YXtcclxuICAgIHByaXZhdGUgX2FsbWFjZW5EZUJhcmNvczpCYXJjb1tdPVtdO1xyXG4gICAgcHJpdmF0ZSBfZmFicmljYURlQmFyY29zOkdlbmVyYWRvckZsb3RhO1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGltZW5zaW9uZXM6RGltZW5zaW9uKSB7XHJcbiAgICAgICAgdGhpcy5fZmFicmljYURlQmFyY29zPW5ldyBHZW5lcmFkb3JGbG90YSh0aGlzLl9kaW1lbnNpb25lcyk7XHJcbiAgICAgICAgdGhpcy5nZW5lcmFyRmxvdGEoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2VuZXJhckZsb3RhKCl7XHJcbiAgICAgICAgbGV0IHRhbWFubm9zRGVCYXJjb3M9WzQsNCwzLDMsMywyLDIsMiwyXTtcclxuICAgICAgICBmb3IgKGxldCBpOm51bWJlcj0wO2k8dGFtYW5ub3NEZUJhcmNvcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgdGhpcy5fYWxtYWNlbkRlQmFyY29zW2ldPXRoaXMuX2ZhYnJpY2FEZUJhcmNvcy5jcmVhckJhcmNvKHRhbWFubm9zRGVCYXJjb3NbaV0sdGhpcy5fYWxtYWNlbkRlQmFyY29zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldCBhbG1hY2VuRGVCYXJjb3MoKTogQXJyYXk8QmFyY28+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWxtYWNlbkRlQmFyY29zO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhbG1hY2VuRGVCYXJjb3ModmFsdWU6IEFycmF5PEJhcmNvPikge1xyXG4gICAgICAgIHRoaXMuX2FsbWFjZW5EZUJhcmNvcyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmYWJyaWNhRGVCYXJjb3MoKTogR2VuZXJhZG9yRmxvdGEge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWJyaWNhRGVCYXJjb3M7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGZhYnJpY2FEZUJhcmNvcyh2YWx1ZTogR2VuZXJhZG9yRmxvdGEpIHtcclxuICAgICAgICB0aGlzLl9mYWJyaWNhRGVCYXJjb3MgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZGltZW5zaW9uZXMoKTogRGltZW5zaW9uIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGltZW5zaW9uZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRpbWVuc2lvbmVzKHZhbHVlOiBEaW1lbnNpb24pIHtcclxuICAgICAgICB0aGlzLl9kaW1lbnNpb25lcyA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb21wcm9iYXJCYXJjb0h1bmRpZG8oX2JhcmNvc0h1bmRpZG9zOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgYmFyY29zVG9jYWRvcz0wO1xyXG4gICAgICAgIGZvciAobGV0IGk6bnVtYmVyPTA7aTx0aGlzLmFsbWFjZW5EZUJhcmNvcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgYmFyY29zVG9jYWRvcz0wO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqOm51bWJlcj0wO2o8dGhpcy5hbG1hY2VuRGVCYXJjb3NbaV0ucG9zaWNpb25lcy5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbWFjZW5EZUJhcmNvc1tpXS5wb3NpY2lvbmVzW2pdLmVzdGFkbz09RXN0YWRvLnRvY2Fkbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFyY29zVG9jYWRvcysrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXJjb3NUb2NhZG9zPT10aGlzLmFsbWFjZW5EZUJhcmNvc1tpXS5wb3NpY2lvbmVzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiSHVuZGlkb1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odW5kaXJCYXJjbyh0aGlzLmFsbWFjZW5EZUJhcmNvc1tpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2JhcmNvc0h1bmRpZG9zKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfYmFyY29zSHVuZGlkb3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBodW5kaXJCYXJjbyhiYXJjbzogQmFyY28pIHtcclxuICAgICAgICBmb3IgKGxldCBpOm51bWJlcj0wO2k8YmFyY28ucG9zaWNpb25lcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgYmFyY28ucG9zaWNpb25lc1tpXS5lc3RhZG89RXN0YWRvLmh1bmRpZG87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8gZ2VuZXJhciB1bmEgc2VyaWUgZGUgYmFyY29zIHF1ZSBubyBzZSBzb2xhcGFuXHJcbi8veSBxdWUgc29ydGVhbiBsYSBwb3NpY2lvbiBpbmljaWFsIGRlIGNhZGEgYmFyY29cclxuLy95IGVsIHNlbnRpZG8gZW4gcXVlIGNyZWNjZW4uXHJcbi8vQWRlbWFzIGVsIGFycmF5IGRlIGJhcmNvcyBjcmVhZG9zIGFzZWd1cmEgcXVlIG5pbmd1bm8gIHNlIGhhIHNvbGFwYWRvLlxyXG4vL05lY2VzaXRhIGNvbm9jZXIgbGEgcG9zaWNpb24gbWF4aW1hIGEgbGEgcXVlIHB1ZWRlIGRlc3BsZWdhciB1biBiYXJjb1xyXG4vLyhtYXhpbW8gZmlsYSBvIGNvbHVtbmEpIGFsZWF0b3JpbyBkZSAgMCBoYXN0YSAxMi1sb25naXR1ZCBkZSBiYXJjby5cclxuaW1wb3J0IHtEaW1lbnNpb259IGZyb20gXCIuL2RpbWVuc2lvblwiO1xyXG5pbXBvcnQge1NlbnRpZG99IGZyb20gXCIuL3NlbnRpZG9cIjtcclxuaW1wb3J0IHtDb29yZGVuYWRhfSBmcm9tIFwiLi9jb29yZGVuYWRhXCI7XHJcbmltcG9ydCB7QmFyY299IGZyb20gXCIuL2JhcmNvXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VuZXJhZG9yRmxvdGEge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGltZW5zaW9uZXM6IERpbWVuc2lvbikge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGFtZU51bWVyb0FsZWF0b3Jpb0VudHJlTWF4TWluKG1pbmltbzogbnVtYmVyLCBtYXhpbW86IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtaW5pbW8gLSBtYXhpbW8pICsgbWF4aW1vKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRhbWVTZW50aWRvQWxlYXRvcmlvKCk6IFNlbnRpZG8ge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kYW1lTnVtZXJvQWxlYXRvcmlvRW50cmVNYXhNaW4oLTEsIDIpID09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNlbnRpZG8uZGVyZWNoYVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gU2VudGlkby5hYmFqbztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkYW1lQ29vcmRlbmFkYUluaWNhbChzaXplOiBudW1iZXIsIHNlbnRpZG86IFNlbnRpZG8pOiBDb29yZGVuYWRhIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGxldCB4ID0gdGhpcy5kYW1lTnVtZXJvQWxlYXRvcmlvRW50cmVNYXhNaW4oMCwgdGhpcy5fZGltZW5zaW9uZXMuYW5jaG9EKVxyXG4gICAgICAgICAgICBsZXQgeSA9IHRoaXMuZGFtZU51bWVyb0FsZWF0b3Jpb0VudHJlTWF4TWluKDAsIHRoaXMuX2RpbWVuc2lvbmVzLmFsdG9EKVxyXG4gICAgICAgICAgICB2YXIgY29vcmRlbmFkYT0gbmV3IENvb3JkZW5hZGEoeCwgeSk7XHJcbiAgICAgICAgfXdoaWxlKCF0aGlzLmVudHJhRWxCYXJjb0VuTG9zTGltaXRlcyhzaXplLCBjb29yZGVuYWRhLCBzZW50aWRvKSk7XHJcbiAgICAgICAgcmV0dXJuIGNvb3JkZW5hZGE7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXJCYXJjbyhzaXplOiBudW1iZXIsYWxtYWNlbkRlQmFyY29zOiBBcnJheTxCYXJjbz4pOiBCYXJjbyB7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2YXIgZGlyZWNjaW9uID0gdGhpcy5kYW1lU2VudGlkb0FsZWF0b3JpbygpO1xyXG4gICAgICAgICAgICB2YXIgaW5pY2lhbCA9IHRoaXMuZGFtZUNvb3JkZW5hZGFJbmljYWwoc2l6ZSxkaXJlY2Npb24pO1xyXG4gICAgICAgICAgICB2YXIgYmFyY289bmV3IEJhcmNvKHNpemUsIGluaWNpYWwsIGRpcmVjY2lvbik7XHJcbiAgICAgICAgfSB3aGlsZSAodGhpcy5leGl4dGVTb2xhcGFtaWVudG8oYmFyY28sYWxtYWNlbkRlQmFyY29zKSlcclxuICAgICAgICByZXR1cm4gYmFyY287XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbnRyYUVsQmFyY29Fbkxvc0xpbWl0ZXMoc2l6ZTogbnVtYmVyLCBjb29yZGVuYWRhSW5pY2lhbDogQ29vcmRlbmFkYSwgc2VudGlkbzogU2VudGlkbyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBwb3NNYXg6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IHNhbGVEZUxvc0xJbWl0ZXM6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgIGlmIChzZW50aWRvID09IFNlbnRpZG8uYWJham8pIHtcclxuICAgICAgICAgICAgcG9zTWF4ID0gc2l6ZSArIGNvb3JkZW5hZGFJbmljaWFsLnk7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKHBvc01heCA+IHRoaXMuX2RpbWVuc2lvbmVzLmFsdG9EKSB7XHJcbiAgICAgICAgICAgICAgICBzYWxlRGVMb3NMSW1pdGVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwb3NNYXggPSBzaXplICsgY29vcmRlbmFkYUluaWNpYWwueDtcclxuICAgICAgICAgICAgaWYgKHBvc01heCA+IHRoaXMuX2RpbWVuc2lvbmVzLmFuY2hvRCkge1xyXG4gICAgICAgICAgICAgICAgc2FsZURlTG9zTEltaXRlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzYWxlRGVMb3NMSW1pdGVzO1xyXG5cclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV4aXh0ZVNvbGFwYW1pZW50byhiYXJjbzpCYXJjbyxhbG1hY2VuRGVCYXJjb3M6IEFycmF5PEJhcmNvPik6Qm9vbGVhbntcclxuICAgICAgICBmb3IgKGxldCBpOm51bWJlcj0wO2k8YWxtYWNlbkRlQmFyY29zLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZiAoYmFyY28uY29tcHJ1ZWJhU29sYXBhbWllbnRvKGFsbWFjZW5EZUJhcmNvc1tpXS5wb3NpY2lvbmVzKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0Nvb3JkZW5hZGF9IGZyb20gJy4vY29vcmRlbmFkYSc7XHJcbmltcG9ydCB7Q2FzaWxsYX0gZnJvbSAnLi9jYXNpbGxhJztcclxuaW1wb3J0IHtTZW50aWRvfSBmcm9tICcuL3NlbnRpZG8nO1xyXG5pbXBvcnQgeyBFc3RhZG8gfSBmcm9tICcuL2VzdGFkbyc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEJhcmNve1xyXG5cclxuICBwcml2YXRlIF9wb3NpY2lvbmVzOiBDYXNpbGxhW109W107XHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgX3NpemU6IG51bWJlcixpbmljaWFsOkNvb3JkZW5hZGEsZGlyZWNjaW9uOlNlbnRpZG8pIHtcclxuICAgIHRoaXMuY3JlYXJCYXJjbyhpbmljaWFsLGRpcmVjY2lvbik7XHJcblxyXG5cclxuXHJcbiAgfVxyXG4gIHByaXZhdGUgY3JlYXJCYXJjbyhpbmljaWFsOkNvb3JkZW5hZGEsZGlyZWNjaW9uOlNlbnRpZG8pe1xyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc2l6ZTsgaW5kZXgrKykge1xyXG4gICAgICB0aGlzLnBvc2ljaW9uZXMucHVzaChuZXcgQ2FzaWxsYShuZXcgQ29vcmRlbmFkYShpbmljaWFsLngsaW5pY2lhbC55KSxFc3RhZG8uaW5kZW1uZSkpXHJcbiAgICAgIC8vZWwgZmFsbG8gZXMgcXVlIG5vIHRlbmdvIHF1ZSBjb25vY2VyIGVsIG1lY2FuaXNtbyBpbnRlcm5vIGRlIGxhIGNvb3JkZW5hZGEsIGVzdGUgaWYgZGViZSBlc3RhciBlbiBiYXJjbyBlbiBlbCBtZXRvZG8gbW92ZXIuXHJcbiAgICAgIC8vIGlmIChkaXJlY2Npb249PSBTZW50aWRvLmFiYWpvKSB7XHJcbiAgICAgIC8vICAgaW5pY2lhbC5iYWphcigpO1xyXG4gICAgICAvLyB9ZWxzZXtcclxuICAgICAgLy8gICBpbmljaWFsLmF2YW56YXIoKTtcclxuICAgICAgLy8gfVxyXG4gICAgICAvL2xvIGNvcnJlY3RvIHNlcmlhOlxyXG4gICAgICBpbmljaWFsLm1vdmVyKGRpcmVjY2lvbik7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuICBcclxuICBwdWJsaWMgY29tcHJ1ZWJhU29sYXBhbWllbnRvKGNhc2lsbGE6Q2FzaWxsYVtdKSA6Ym9vbGVhbntcclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXNpbGxhLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICBmb3IgKGxldCBpbmRleE9iamVjdCA9IDA7IGluZGV4T2JqZWN0IDwgdGhpcy5fcG9zaWNpb25lcy5sZW5ndGg7IGluZGV4T2JqZWN0KyspIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucG9zaWNpb25lc1tpbmRleE9iamVjdF0uY29vcmRlbmFkYS5lcXVhbHMoY2FzaWxsYVtpbmRleF0uY29vcmRlbmFkYSkpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXR0ZXIgc2l6ZVxyXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxyXG4gICAgICovXHJcblx0cHVibGljIGdldCBzaXplKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2l6ZTtcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXR0ZXIgcG9zaWNpb25lc1xyXG4gICAgICogQHJldHVybiB7Q2FzaWxsYVtdfVxyXG4gICAgICovXHJcblx0cHVibGljIGdldCBwb3NpY2lvbmVzKCk6IENhc2lsbGFbXSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fcG9zaWNpb25lcztcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR0ZXIgc2l6ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXHJcbiAgICAgKi9cclxuXHRwdWJsaWMgc2V0IHNpemUodmFsdWU6IG51bWJlcikge1xyXG5cdFx0dGhpcy5fc2l6ZSA9IHZhbHVlO1xyXG5cdH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHRlciBwb3NpY2lvbmVzXHJcbiAgICAgKiBAcGFyYW0ge0Nhc2lsbGFbXX0gdmFsdWVcclxuICAgICAqL1xyXG5cdHB1YmxpYyBzZXQgcG9zaWNpb25lcyh2YWx1ZTogQ2FzaWxsYVtdKSB7XHJcblx0XHR0aGlzLl9wb3NpY2lvbmVzID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG59IiwiXHJcbmltcG9ydCB7RXN0YWRvfSBmcm9tJy4vZXN0YWRvJztcclxuaW1wb3J0IHtDb29yZGVuYWRhfSBmcm9tJy4vY29vcmRlbmFkYSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FzaWxsYXtcclxuXHJcbiAgXHJcbiAgXHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgX2Nvb3JkZW5hZGE6Q29vcmRlbmFkYSxwcml2YXRlIF9lc3RhZG86RXN0YWRvKSB7XHJcblx0fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0dGVyIGNvb3JkZW5hZGFcclxuICAgICAqIEByZXR1cm4ge0Nvb3JkZW5hZGF9XHJcbiAgICAgKi9cclxuXHRwdWJsaWMgZ2V0IGNvb3JkZW5hZGEoKTogQ29vcmRlbmFkYSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fY29vcmRlbmFkYTtcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXR0ZXIgZXN0YWRvXHJcbiAgICAgKiBAcmV0dXJuIHtFc3RhZG99XHJcbiAgICAgKi9cclxuXHRwdWJsaWMgZ2V0IGVzdGFkbygpOiBFc3RhZG8ge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2VzdGFkbztcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR0ZXIgY29vcmRlbmFkYVxyXG4gICAgICogQHBhcmFtIHtDb29yZGVuYWRhfSB2YWx1ZVxyXG4gICAgICovXHJcblx0cHVibGljIHNldCBjb29yZGVuYWRhKHZhbHVlOiBDb29yZGVuYWRhKSB7XHJcblx0XHR0aGlzLl9jb29yZGVuYWRhID0gdmFsdWU7XHJcblx0fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0dGVyIGVzdGFkb1xyXG4gICAgICogQHBhcmFtIHtFc3RhZG99IHZhbHVlXHJcbiAgICAgKi9cclxuXHRwdWJsaWMgc2V0IGVzdGFkbyh2YWx1ZTogRXN0YWRvKSB7XHJcblx0XHR0aGlzLl9lc3RhZG8gPSB2YWx1ZTtcclxuXHR9XHJcblxyXG5cclxuXHJcbn0iLCJleHBvcnQgZW51bSBFc3RhZG97XHJcblxyXG50b2NhZG8sIGluZGVtbmUsaHVuZGlkb1xyXG5cclxufSIsImltcG9ydCB7RGltZW5zaW9ufSBmcm9tIFwiLi9kaW1lbnNpb25cIjtcclxuaW1wb3J0IHtUYWJsZXJvfSBmcm9tIFwiLi90YWJsZXJvXCI7XHJcbmltcG9ydCB7Q29vcmRlbmFkYX0gZnJvbSBcIi4vY29vcmRlbmFkYVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEp1Z2FkYXtcclxuXHJcbiAgICBwcml2YXRlIF9kaW1lbnNpb25lczogRGltZW5zaW9uID0gbmV3IERpbWVuc2lvbig4LCAxMilcclxuICAgIHByaXZhdGUgX3RhYmxlcm86IFRhYmxlcm8gPSBuZXcgVGFibGVybyh0aGlzLl9kaW1lbnNpb25lcyk7XHJcblxyXG5cclxuICAgIHB1YmxpYyBwbGF5KCkge1xyXG4gICAgICAgIGFsZXJ0KFwiSHVuZGlyIGxhIGZsb3RhXFxuIEVsIGp1ZWdvIHRpZW5lIHVuIHRhYmxlcm8gZGUgOCoxMiB5IDkgYmFyY29zIHJlcGFydGlkbyBwb3IgZWwgdGFibGVyb1xcbiBkZSBkaWZlcmVudGVzIHRhbWHDsW9zXCIpXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fdGFibGVyby50YWJsZXJvKTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMuX3RhYmxlcm8ubW9zdHJhclRhYmxlcm8oKSlcclxuICAgICAgICAgICAgdGhpcy5fdGFibGVyby5hc2lnbmFyRXN0YWRvQ2FzaWxsYSh0aGlzLlNvbGljaXRhckNvb3JkZW5hZGFBY3R1YWNpb24oKSlcclxuXHJcbiAgICAgICAgfXdoaWxlKCF0aGlzLl90YWJsZXJvLmNvbXByb2JhckZsb3RhVG90YWxIdW5kaWRhKCkpXHJcbiAgICAgICAgYWxlcnQoXCJWaWN0b3JpYSwgaGFzIGh1bmRpZG8gbGEgZmxvdGFcIilcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIFNvbGljaXRhckNvb3JkZW5hZGFBY3R1YWNpb24oKTogQ29vcmRlbmFkYSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb29yZGVuYWRhKHRoaXMuc29saWNpdGFyUHVudG9ZKCksIHRoaXMuc29saWNpdGFyUHVudG9YKCkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzb2xpY2l0YXJQdW50b1goKTogbnVtYmVyIHtcclxuICAgICAgICBkbyB7XHJcblxyXG4gICAgICAgICAgICB2YXIgWDphbnk9IHByb21wdChcIkRhbWUgZWwgcHVudG8gZW4gZWxlIGVqZSBYXCIpXHJcbiAgICAgICAgICAgIGlmIChYID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIFggPSAwO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICBYLT0xXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlICghdGhpcy5jb21wcm9iYXJDb29yZGVuYWRhKFgsIHRoaXMuX2RpbWVuc2lvbmVzLmFuY2hvRCkpXHJcbiAgICAgICAgcmV0dXJuIFhcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzb2xpY2l0YXJQdW50b1koKTogbnVtYmVyIHtcclxuICAgICAgICBkbyB7XHJcblxyXG4gICAgICAgICAgICB2YXIgWTogYW55ID0gcHJvbXB0KFwiRGFtZSBlbCBwdW50byBlbiBlbGUgZWplIFlcIilcclxuICAgICAgICAgICAgaWYgKFkgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgWSA9IDA7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG5cclxuICAgICAgICAgICAgICAgIFktPTFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKCF0aGlzLmNvbXByb2JhckNvb3JkZW5hZGEoWSwgdGhpcy5fZGltZW5zaW9uZXMuYWx0b0QpKVxyXG4gICAgICAgIHJldHVybiBZXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgY29tcHJvYmFyQ29vcmRlbmFkYShwdW50bzogbnVtYmVyLCBtYXhpbW86IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChwdW50byA8IG1heGltbykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==